<app-header></app-header>
<h1 class="text-center">Dashboard FORD</h1>

<div class="container">

  <div class="container">
    <div class="row">
      <div class="card text-bg-light mb-3 col" style="width: 18rem;">
        <div class="card-header title">Veículo</div>
        <div class="card-body">
          <select (change)="ChangeInfo($event)">
            <option> -- Select --</option>
            <option [value]="vehicle.id" *ngFor="let vehicle of vehicleList">
              {{ vehicle.vehicle }}
            </option>
          </select>
        </div>
      </div>

      <div class="card text-bg-light mb-3 col" style="width: 18rem;">
        <div class="card-header title">Total de Vendas</div>
        <div class="card-body">
          <span id="totalVendas">

          </span>
          <p>Unid.</p>
        </div>
      </div>

      <div class="card text-bg-light mb-3 col" style="width: 18rem;">
        <div class="card-header title">Conectados</div>
        <div class="card-body">
          <span id="connected">

          </span>
          <p>Unid.</p>
        </div>
      </div>

      <div class="card text-bg-light mb-3 col" style="width: 18rem;">
        <div class="card-header title">Update Software</div>
        <div class="card-body">
          <span id="updateSoftware">

          </span>
          <p>Unid.</p>
        </div>
      </div>
    </div>
  </div>

  <div class="message-center card-body hidden">
    <fa-icon id="close" [icon]="faClose" (click)="close()"></fa-icon>

    <form class="row g-3 form-ajust" #registerForm="ngForm" (ngSubmit)="onRegister(registerForm.value)">
      <div class="col-auto">
        <label for="vin">Cadastre a descrição do carro</label>
        <input type="text" readonly class="form-control-plaintext" id="vin" placeholder="Verifique as informações antes de submiter">
      </div>
      <div class="col-auto">
        <label for="vin">Código - Vin</label>
        <input type="text" class="form-control" id="vin" placeholder="Vin" ngModel="5NPET46C07H192362" name="vin">
      </div>
      <div class="col-auto">
        <label for="odometer">Odômetro</label>
        <input type="text" class="form-control" id="odometer" placeholder="Odometer" ngModel="23344" name="odometer" value="23344">
      </div>
      <div class="col-auto">
        <label for="tirePressure">Pressão do Pneu</label>
        <input type="text" class="form-control" id="tirePressure" placeholder="Tire Pressure" ngModel="36,36,35,34" name="tirePressure" value="36,36,35,34">
      </div>
      <div class="col-auto">
        <label for="status">Status</label>
        <input type="text" class="form-control" id="status" placeholder="Status" ngModel="on" name="status" value="on">
      </div>
      <div class="col-auto">
        <label for="batteryStatus">Status da Bateria</label>
        <input type="text" class="form-control" id="batteryStatus" placeholder="Battery Status" ngModel="Ok" name="batteryStatus" value="Ok">
      </div>
      <div class="col-auto">
        <label for="fuelLevel"> Nível do Combustível </label>
        <input type="text" class="form-control" id="fuelLevel" placeholder="Fuel Level" ngModel="76" name="fuelLevel" value="76">
      </div>
      <div class="col-auto">
        <label for="lat"> Lat </label>
        <input type="text" class="form-control" id="lat" placeholder="Lat" ngModel="-12,2322" name="lat" value="12,2322">
      </div>
      <div class="col-auto">
        <label for="long"> Long </label>
        <input type="text" class="form-control" id="long" placeholder="Long" ngModel="-35,2314" name="long" value="-35,2314">
      </div>

      <div class="col-auto btn-auto">
        <button type="submit" class="btn-register confirm">Confirmar Cadastro</button>
      </div>
    </form>
  </div>

  <!-- image -->
<div class="text-center">
  <img src="assets\img\mustang.png" id="image">
</div>

<!-- table -->
<button class="btn-register" (click)="register()">Cadastrar</button>
<div class="table-responsive">
    <table class="table">
      <thead>
        <tr>
          <th scope="col">Código - Vin</th>
          <th scope="col">Odômetro</th>
          <th scope="col">Nível de Combustivel</th>
          <th scope="col">Status</th>
          <th scope="col">Lat.</th>
          <th scope="col">Long.</th>
        </tr>
      </thead>

      <tbody>

        <tr>
          <th scope="row" class="input-row">
            <input type="text" name="search" id="search" placeholder="2FRHDUYS2Y63NHD22454" #myInput [formControl]="searchInput">
          </th>

          <div class="result-box" *ngIf="vehicleData$ | async as vehicleData; else elseBlock">

            <td *ngFor="let vehicleData of vehicleData">
              <app-card-result [data]="vehicleData"></app-card-result>
            </td>

          </div>

        </tr>

        <ng-template #elseBlock>
          <p>Por favor insira um código vin válido</p>
        </ng-template>

        <ng-template #searchResult>
            <td *ngFor="let vehicleData of vehicleData" > {{ vehicleData.odometer }} Km </td>

            <td *ngFor="let fuelLevel of vehicleData"> {{ fuelLevel.fuelLevel }} % </td>

            <td *ngFor="let status of vehicleData"> {{ status.status }} </td>

            <td *ngFor="let lat of vehicleData"> {{ lat.lat }} </td>

            <td *ngFor="let long of vehicleData"> {{ long.long }} </td>
        </ng-template>

      </tbody>

      <thead>
        <tr>
          <th scope="col"></th>
          <th scope="col"></th>
          <th scope="col"></th>
          <th scope="col"></th>
          <th scope="col"></th>
          <th scope="col"></th>
        </tr>
      </thead>

    </table>
</div>

  <!-- <select>
    <option *ngFor="let vin of vehicleData">
      {{ vin.vin }}
    </option>
  </select> -->

</div>
